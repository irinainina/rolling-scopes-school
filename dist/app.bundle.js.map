{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","canvas","document","querySelector","ctx","getContext","x1","y1","isDrawing","boxSize","sizeInput","getElementsByName","currentBoxSize","forEach","size","checked","resizeCanvas","sizeCanvas","resize","setSizeCanvas","canvasTemp","createElement","ctxTemp","canvas2All","querySelectorAll","deltaSize","width","drawImage","height","canvas2","layer","showCanvasSize","showSize","innerText","resizeInput","scale","offsetWidth","currentTool","currentToolValue","tool","currentColor","activeColorValue","getPixel","imageData","x","y","offset","data","slice","setPixel","color","colorsMatch","a","b","floodFill","fillColor","getImageData","targetColor","pixelsToCheck","length","pop","push","putImageData","eraser","event","Math","floor","offsetX","offsetY","ctrlKey","clearRect","input","addEventListener","showCoordinates","parentNode","style","opacity","activeColor","prevColor","temp","canvasCopy","startLine","drawLine","x2","y2","deltaX","abs","deltaY","signX","signY","error","fillRect","error2","midPointCircle","x0","y0","pixelSet","startX","startY","midPointEllipse","widthSquared","heightSquared","j","pixelSetEllipse","squaredDiff","_startX","_startY","shape","rgbToHsl","g","h","max","min","fillStyle","myImageData","Image","src","toDataURL","save","translate","rotate","PI","onload","restore","changeHotkeys","hotkeyOpen","hotkeyClose","showSettings","settings","buttons","parent","target","classList","contains","button","remove","add","setting","lastElementChild","inform","btnHotkey","hotkeyValues","hotkeyValuesArr","hotkey","changeValue","match","toUpperCase","includes","previousElementSibling","tooltip","dataset","window","tools","hotkeyNames","code","settingResizeBtn","settingSaveBtn","settingImportBtn","frameNumber","frame","index","frameStyle","frames","frameCreate","ctx2","e","delta","wheelDelta","offsetHeight","endLine","shiftKey","rgbColor","hex","substring","split","join","hexToRgbA","cellColor","r1","r2","lineWidth","strokeStyle","strokeRect","deltax","deltay","toString","square","addFrame","clone","cloneNode","appendChild","addFrameButton","children","animationBackground","onmousedown","position","zIndex","onmousemove","top","pageY","offsetTop","left","moveAt","onmouseup","item","parent1","child1","firstElementChild","parent0","child0","canvasParentNode","insertBefore","layerManagementContainer","styleActiveLayer","layerPlus","addLayer","layernum","span","firstChild","createLayer","canvastempnum","url","localStorage","setItem","createCanvasTemp","drawImageActiveClickingLayer","layerActiveNum","canvasTempAll","isCanvasTemp","removeCanvasTemp","layerActive","layersLength","ctxFrame","removeChild","canvasTempToFrame","stopPropagation","mainContainer","prevLayer","prevCanvasTemp","layerUp","nextLayer","nextElementSibling","nextCanvasTemp","layerDown","rangeFPS","layerWrapper","fullscreenElement","exitFullscreen","requestFullscreen","timer","indexImage","animationSpeed","speed","framesCanvas","ctxLayer","clearInterval","setTimeout","rangeSize","valueImageSize","framesToImages","images","canvasIn","ctxIn","imageSmoothingEnabled","ArrayBufferData","partData","buffer","gifshot","createGIF","interval","gifWidth","gifHeight","obj","image","download","arrAnimationSpeed","Array","fill","UPNG","encode","fps","frameCount","canvasUrl","file","files","reader","FileReader","contents","pixelArr","saveFps","saveSize","saveFrameCount","saveCanvasUrl","console","log","saveCanvasImage","framesParent","framesImage","importPixel","result","readAsText","readerImage","loadImageUrl","loadImage","readAsDataURL","fileContent","Blob","type","accessToken","gapi","auth2","getAuthInstance","currentUser","getAuthResponse","access_token","form","FormData","append","JSON","stringify","mimeType","fetch","method","headers","Headers","Authorization","body","onclick","this","saveFrames","framesLength","framesUrl","onchange","getItem","radioTool","setAttribute","radioResize","savedImage","clear"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const canvas = document.querySelector('.canvas-active');\r\nconst ctx = canvas.getContext('2d');\r\nlet isDrawing = false;\r\n// x1, y1 - coordinates of start position of cursor\r\nlet x1, y1;\r\n\r\n// choice size of tool 1-4px\r\nfunction boxSize() {\r\n  const sizeInput = document.getElementsByName('size');\r\n  let currentBoxSize = 1;\r\n  sizeInput.forEach(size => {\r\n    if (size.checked) {\r\n      currentBoxSize = +size.value;\r\n    }\r\n  });\r\n  return currentBoxSize;\r\n}\r\n\r\n// choice size of canvas 32x32, 64x64, 128x128px\r\nfunction resizeCanvas() {\r\n  const resizeInput = document.getElementsByName('resize');\r\n  let sizeCanvas;\r\n\r\n  resizeInput.forEach(resize => {\r\n    if (resize.checked) {\r\n      sizeCanvas = resize.value;\r\n    }\r\n  });\r\n\r\n  return sizeCanvas;\r\n}\r\n\r\n// resize canvas and save previous image on canvas and frames\r\nfunction setSizeCanvas() {\r\n  const canvasTemp = document.createElement('canvas');\r\n  const ctxTemp = canvasTemp.getContext('2d');\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n  const sizeCanvas = resizeCanvas();\r\n  const deltaSize = (sizeCanvas - canvas.width) / 2;\r\n\r\n  ctxTemp.drawImage(canvas, 0, 0);\r\n  canvas.width = canvas.height = sizeCanvas;\r\n  ctx.drawImage(canvasTemp, deltaSize, deltaSize);\r\n\r\n  canvas2All.forEach(canvas2 => {\r\n    ctxTemp.drawImage(canvas2, 0, 0);\r\n    canvas2.width = canvas2.height = sizeCanvas;\r\n    const ctx2 = canvas2.getContext('2d');\r\n    ctx2.drawImage(canvasTemp, deltaSize, deltaSize);\r\n  });\r\n\r\n  const layer = document.querySelector('.layer');\r\n  layer.width = layer.height = sizeCanvas;\r\n}\r\n\r\n// show information about canvas size\r\nfunction showCanvasSize() {\r\n  const showSize = document.querySelector('.canvas-size span');\r\n  let sizeCanvas = resizeCanvas();\r\n  showSize.innerText = `[${sizeCanvas}x${sizeCanvas}]`;\r\n}\r\n\r\nconst resizeInput = document.getElementsByName('resize');\r\nresizeInput.forEach(input => input.addEventListener(\"click\", setSizeCanvas));\r\nresizeInput.forEach(input => input.addEventListener(\"click\", showCanvasSize));\r\n\r\n// scale the mouse position on canvas\r\nfunction scale() {\r\n  let pos = canvas.offsetWidth / canvas.width;\r\n  return pos;\r\n}\r\n\r\n// get coordinates x1, y1 mouse on canvas\r\ncanvas.addEventListener('mousemove', () => {\r\n  let size = boxSize();\r\n  x1 = Math.floor(event.offsetX / scale() / size) * size;\r\n  y1 = Math.floor(event.offsetY / scale() / size) * size;\r\n});\r\n\r\n// show information about cursor coordinates\r\nfunction showCoordinates() {\r\n  const showCoordinates = document.querySelector('.coordinates span');\r\n  showCoordinates.parentNode.style.opacity = '1';\r\n  showCoordinates.innerText = `${x1}:${y1}`;\r\n  canvas.addEventListener('mouseleave', () => showCoordinates.parentNode.style.opacity = '0');\r\n}\r\n\r\ncanvas.addEventListener('mousemove', showCoordinates);\r\n\r\n// get current tool\r\nfunction currentTool() {\r\n  const toolInput = document.getElementsByName('tool');\r\n  let currentToolValue;\r\n  toolInput.forEach(tool => {\r\n    if (tool.checked) {\r\n      currentToolValue = tool.value;\r\n    }\r\n  });\r\n  return currentToolValue;\r\n}\r\n\r\n// get current color\r\nfunction currentColor() {\r\n  const activeColor = document.querySelector('.active-color');\r\n  let activeColorValue;\r\n  activeColorValue = activeColor.value;\r\n  return activeColorValue;\r\n}\r\n\r\n// change current and prev colors\r\nfunction changeColor() {\r\n  const activeColor = document.querySelector('.active-color');\r\n  const prevColor = document.querySelector('.prev-color');\r\n  let temp;\r\n  temp = activeColor.value;\r\n  activeColor.value = prevColor.value;\r\n  prevColor.value = temp;\r\n}\r\n\r\nconst rotate = document.querySelector('.rotate');\r\nrotate.addEventListener('click', changeColor);\r\n\r\n// checked mousedown on the canvas\r\ncanvas.addEventListener('mousedown', () => {\r\n  isDrawing = true;\r\n});\r\n\r\ncanvas.addEventListener('mouseup', () => {\r\n  isDrawing = false;\r\n});\r\n\r\ncanvas.parentNode.addEventListener('mouseleave', () => {\r\n  isDrawing = false;\r\n});\r\n\r\n// drawing with mirror pen on the canvas\r\nfunction mirror(event) {\r\n  if (currentTool() !== 'mirror' || !isDrawing) return;\r\n  ctx.fillStyle = currentColor();\r\n  let size = boxSize();\r\n  const x = Math.floor(event.offsetX / scale() / size) * size;\r\n  const x1 = Math.abs(canvas.width - x - boxSize());\r\n  const y = Math.floor(event.offsetY / scale() / size) * size;\r\n\r\n  if (event.ctrlKey) {\r\n    const y1 = Math.abs(canvas.width - y - boxSize());\r\n    ctx.fillRect(x, y, size, size);\r\n    ctx.fillRect(x, y1, size, size);\r\n  } else if (event.shiftKey) {\r\n    const x1 = Math.abs(canvas.width - x - boxSize());\r\n    const y1 = Math.abs(canvas.width - y - boxSize());\r\n    ctx.fillRect(x, y, size, size);\r\n    ctx.fillRect(x1, y, size, size);\r\n    ctx.fillRect(x, y1, size, size);\r\n    ctx.fillRect(x1, y1, size, size);\r\n  } else {\r\n    ctx.fillRect(x, y, size, size);\r\n    ctx.fillRect(x1, y, size, size);\r\n  }\r\n}\r\n\r\n// fill canvas with one color\r\n//  https://stackoverflow.com/questions/53077955/how-do-i-do-flood-fill-on-the-html-canvas-in-javascript\r\nfunction getPixel(imageData, x, y) {\r\n  if (x < 0 || y < 0 || x >= imageData.width || y >= imageData.height) {\r\n    return [-1, -1, -1, -1];  // impossible color\r\n  } else {\r\n    const offset = (y * imageData.width + x) * 4;\r\n    return imageData.data.slice(offset, offset + 4);\r\n  }\r\n}\r\n\r\nfunction setPixel(imageData, x, y, color) {\r\n  const offset = (y * imageData.width + x) * 4;\r\n  imageData.data[offset + 0] = color[0];\r\n  imageData.data[offset + 1] = color[1];\r\n  imageData.data[offset + 2] = color[2];\r\n  imageData.data[offset + 3] = color[3];\r\n}\r\n\r\nfunction colorsMatch(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\nfunction floodFill(ctx, x, y, fillColor) {\r\n  // read the pixels in the canvas\r\n  const imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n  // get the color we're filling\r\n  const targetColor = getPixel(imageData, x, y);\r\n\r\n  // check we are actually filling a different color\r\n  if (!colorsMatch(targetColor, fillColor)) {\r\n\r\n    const pixelsToCheck = [x, y];\r\n    while (pixelsToCheck.length > 0) {\r\n      const y = pixelsToCheck.pop();\r\n      const x = pixelsToCheck.pop();\r\n\r\n      const curColor = getPixel(imageData, x, y);\r\n      if (colorsMatch(curColor, targetColor)) {\r\n        setPixel(imageData, x, y, fillColor);\r\n        pixelsToCheck.push(x + 1, y);\r\n        pixelsToCheck.push(x - 1, y);\r\n        pixelsToCheck.push(x, y + 1);\r\n        pixelsToCheck.push(x, y - 1);\r\n      }\r\n    }\r\n\r\n    // put the data back\r\n    ctx.putImageData(imageData, 0, 0);\r\n  }\r\n}\r\n\r\nfunction hexToRgbA(hex){\r\n  let c = hex.substring(1).split('');\r\n  if (c.length === 3) {\r\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n  }\r\n  c = '0x' + c.join('');\r\n  return [(c>>16)&255, (c>>8)&255, c&255, 255];\r\n}\r\n\r\nfunction bucket() {\r\n  if (currentTool() !== 'bucket') return;\r\n  if (event.ctrlKey) {\r\n    ctx.fillStyle = currentColor();\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  } else {\r\n    let rgbColor = hexToRgbA(currentColor());\r\n    floodFill(ctx, x1, y1, rgbColor);\r\n  }\r\n}\r\n\r\n// paint all pixels of the same color\r\nfunction brush(event) {\r\n  if (currentTool() !== 'brush') return;\r\n  ctx.fillStyle = currentColor();\r\n  // determine color pixel under mouse\r\n  let x = event.offsetX / scale();\r\n  let y = event.offsetY / scale();\r\n  let cellColor = ctx.getImageData(x, y, 1, 1).data.join(',');\r\n\r\n  let width = canvas.width;\r\n  for (let i = 0; i < width; i++) {\r\n    for (let j = 0; j < width; j++) {\r\n      if (ctx.getImageData(i, j, 1, 1).data.join(',') === cellColor) {\r\n        ctx.fillRect(i, j, 1, 1)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// erasing canvas\r\nfunction eraser(event) {\r\n  if (currentTool() !== 'eraser' || !isDrawing) return;\r\n  let size = boxSize();\r\n  const x = Math.floor(event.offsetX / scale() / size) * size;\r\n  const y = Math.floor(event.offsetY / scale() / size) * size;\r\n  if (event.ctrlKey) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  } else {\r\n    ctx.clearRect(x, y, size, size);\r\n  }\r\n}\r\n\r\n// drawing line\r\n// https://ru.wikipedia.org/wiki/Алгоритм_Брезенхэма\r\nlet canvasCopy = canvas;\r\nconst startLine = {};\r\n\r\ncanvas.addEventListener('mousedown', () => {\r\n  ctx.fillStyle = currentColor();\r\n  canvasCopy = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n  startLine.x = x1;\r\n  startLine.y = y1;\r\n});\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n  let size = boxSize();\r\n  let deltaX = Math.abs(x2 - x1);\r\n  let deltaY = Math.abs(y2 - y1);\r\n  let signX = x1 < x2 ? 1 : -1;\r\n  let signY = y1 < y2 ? 1 : -1;\r\n  let error = deltaX - deltaY;\r\n  ctx.fillRect(x2, y2, size, size);\r\n  while (x1 != x2 || y1 != y2) {\r\n    ctx.fillRect(x1, y1, size, size);\r\n    let error2 = error * 2;\r\n    if (error2 > -deltaY) {\r\n      error -= deltaY;\r\n      x1 += signX;\r\n    }\r\n    if (error2 < deltaX) {\r\n      error += deltaX;\r\n      y1 += signY;\r\n    }\r\n  }\r\n}\r\n\r\nfunction stroke(event) {\r\n  if (currentTool() !== 'stroke' || !isDrawing) return;\r\n  ctx.putImageData(canvasCopy, 0, 0);\r\n  const endLine = {};\r\n  endLine.x = Math.floor(event.offsetX / scale() / boxSize()) * boxSize();\r\n  endLine.y = Math.floor(event.offsetY / scale() / boxSize()) * boxSize();\r\n  drawLine(startLine.x, startLine.y, endLine.x, endLine.y);\r\n}\r\n\r\n// drawing with pen on the canvas\r\nfunction pen(event) {\r\n  if (currentTool() !== 'pen' || !isDrawing) return;\r\n  const endLine = {};\r\n  endLine.x = Math.floor(event.offsetX / scale() / boxSize()) * boxSize();\r\n  endLine.y = Math.floor(event.offsetY / scale() / boxSize()) * boxSize();\r\n  drawLine(startLine.x, startLine.y, endLine.x, endLine.y);\r\n  startLine.x = endLine.x;\r\n  startLine.y = endLine.y;\r\n}\r\n\r\n// drawing rectangle\r\nfunction rectangle(event) {\r\n  if (currentTool() !== 'rectangle' || !isDrawing) return;\r\n  ctx.putImageData(canvasCopy, 0, 0);\r\n  ctx.lineWidth = boxSize();\r\n  ctx.strokeStyle = currentColor();\r\n  let x2 = Math.floor(event.offsetX / scale());\r\n  let y2 = Math.floor(event.offsetY / scale());\r\n\r\n  let width = x2 - startLine.x;\r\n  let height = y2 - startLine.y;\r\n\r\n  if (event.shiftKey) {\r\n    if(Math.abs(width) < Math.abs(height)) {\r\n      if(height > 0) {\r\n        height = Math.abs(width);\r\n      } else {\r\n        height = -Math.abs(width);\r\n      }\r\n    } else if(Math.abs(height) < Math.abs(width)) {\r\n      if(width > 0) {\r\n        width = Math.abs(height);\r\n      } else {\r\n        width = -Math.abs(height);\r\n      }\r\n    }\r\n  }\r\n  if (boxSize() === 1 || boxSize() === 3) {\r\n    ctx.strokeRect(startLine.x + 0.5, startLine.y + 0.5, width, height);\r\n  } else {\r\n    ctx.strokeRect(startLine.x, startLine.y, width, height);\r\n  }\r\n}\r\n\r\n// drawing circle and ellipse\r\n//Midpoint Algorithm for Circle\r\n// https://github.com/asbeane/midpointAlgorithm\r\nfunction midPointCircle(x0, y0, r) {\r\n  var x = r;\r\n  var y = 0;\r\n\r\n  var error = 1 - x;\r\n  while (x >= y) {\r\n    pixelSet(x, y, x0, y0);\r\n    y = y + 1;\r\n    if (error < 0) {\r\n      error += y * 2 + 1;\r\n    } else {\r\n      x--;\r\n      error += 2 * (y - x) + 1;\r\n    }\r\n    pixelSet(x, y, x0, y0);\r\n  }\r\n}\r\n\r\n//Circle Helper\r\nfunction pixelSet(x, y, startX, startY) {\r\n  ctx.fillRect(x + startX, y + startY, 1, 1);\r\n  ctx.fillRect(startX + y, x + startY, 1, 1);\r\n  ctx.fillRect(startX - x, startY + y, 1, 1);\r\n  ctx.fillRect(startX - y, startY + x, 1, 1);\r\n  ctx.fillRect(startX - x, startY - y, 1, 1);\r\n  ctx.fillRect(startX - y, startY - x, 1, 1);\r\n  ctx.fillRect(x + startX, startY - y, 1, 1);\r\n  ctx.fillRect(startX + y, startY - x, 1, 1);\r\n}\r\n\r\n//Mid point Algorithm for ellipse\r\nfunction midPointEllipse(x0, y0, width, height) {\r\n  var x = 0;\r\n  var y = height;\r\n  var widthSquared = width * width;\r\n  var heightSquared = height * height;\r\n\r\n  var i = 0;\r\n  var j = 2 * widthSquared * y;\r\n  pixelSetEllipse(x, y, x0, y0);\r\n  var squaredDiff = heightSquared - (widthSquared * height) + (0.25 * widthSquared);\r\n\r\n  while (i < j) {\r\n    x++;\r\n    i = i + 2 * heightSquared;\r\n    if (squaredDiff < 0) {\r\n      squaredDiff = squaredDiff + heightSquared + i;\r\n    } else {\r\n      y--;\r\n      j = j - 2 * widthSquared;\r\n      squaredDiff = squaredDiff + heightSquared + i - j;\r\n    }\r\n    pixelSetEllipse(x, y, x0, y0);\r\n  }\r\n\r\n  squaredDiff = heightSquared * ((x + 0.5) * (x + 0.5)) + widthSquared * ((y - 1) * (y - 1)) - widthSquared * heightSquared;\r\n  while (y > 0) {\r\n    y--;\r\n    j = j - 2 * widthSquared;\r\n    if (squaredDiff > 0) {\r\n      squaredDiff = squaredDiff + widthSquared - j;\r\n    } else {\r\n      x++;\r\n      i = i + 2 * heightSquared;\r\n      squaredDiff = squaredDiff + widthSquared - j + i;\r\n    }\r\n    pixelSetEllipse(x, y, x0, y0);\r\n  }\r\n}\r\n\r\n//Ellipse Helper\r\nfunction pixelSetEllipse(x, y, _startX, _startY) {\r\n  ctx.fillRect(_startX + x, _startY + y, 1, 1);\r\n  ctx.fillRect(_startX - x, _startY + y, 1, 1);\r\n  ctx.fillRect(_startX + x, _startY - y, 1, 1);\r\n  ctx.fillRect(_startX - x, _startY - y, 1, 1);\r\n}\r\n\r\nfunction circle(event) {\r\n  if (currentTool() !== 'circle' || !isDrawing) return;\r\n  ctx.putImageData(canvasCopy, 0, 0);\r\n  ctx.fillStyle = currentColor();\r\n  const endLine = {};\r\n  endLine.x = Math.floor(event.offsetX / scale() / boxSize()) * boxSize();\r\n  endLine.y = Math.floor(event.offsetY / scale() / boxSize()) * boxSize();\r\n  let r;\r\n  let r1 = Math.floor(Math.abs(endLine.x - startLine.x) / 2);\r\n  let r2 = Math.floor(Math.abs(endLine.y - startLine.y) / 2);\r\n  r1 < r2 ? r = r1 : r = r2;\r\n  if(startLine.x < endLine.x && startLine.y < endLine.y) {\r\n    if (event.shiftKey) {\r\n      midPointCircle(x1 - r, y1 - r, r);\r\n    } else {\r\n      midPointEllipse(x1 - r1, y1 - r2, r1, r2);\r\n    }\r\n  } else if(startLine.x > endLine.x && startLine.y > endLine.y) {\r\n    if (event.shiftKey) {\r\n      midPointCircle(startLine.x - r, startLine.y - r, r);\r\n    } else {\r\n      midPointEllipse(startLine.x - r1, startLine.y - r2, r1, r2);\r\n    }\r\n  }  else if (startLine.x < endLine.x && startLine.y > endLine.y) {\r\n    if (event.shiftKey) {\r\n        midPointCircle(x1 - r, startLine.y - r, r);\r\n      } else {\r\n        midPointEllipse(x1 - r1, startLine.y - r2, r1, r2);\r\n      }\r\n  } else if (startLine.x > endLine.x && startLine.y < endLine.y) {\r\n    if (event.shiftKey) {\r\n        midPointCircle(startLine.x - r, y1 - r, r);\r\n      } else {\r\n        midPointEllipse(startLine.x - r1, y1 - r2, r1, r2);\r\n      }\r\n  }\r\n}\r\n\r\n// move canvas\r\nfunction move() {\r\n  if (currentTool() !== 'move' || !isDrawing) return;\r\n  ctx.putImageData(canvasCopy, 0, 0);\r\n  let deltax = x1 - startLine.x;\r\n  let deltay = y1 - startLine.y;\r\n  let imageData = ctx.getImageData(0, 0, canvas.width - deltax, canvas.height - deltay);\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  ctx.putImageData(imageData, deltax, deltay);\r\n}\r\n\r\n// selection canvas area with same color\r\nfunction shape() {\r\n  if (currentTool() !== 'shape' || !isDrawing) return;\r\n  ctx.putImageData(canvasCopy, 0, 0);\r\n  const rgbColor = [79, 181, 227, 115];\r\n  floodFill(ctx, x1, y1, rgbColor);\r\n  let imageData = ctx.getImageData(startLine.x, startLine.y, canvas.width, canvas.height);\r\n  ctx.putImageData(imageData, x2, y2);\r\n}\r\n\r\n// rotation canvas\r\n// http://qaru.site/questions/6704867/rotate-canvas-90-degrees-clockwise-and-update-width-height\r\nfunction rotation(event) {\r\n  const myImageData = new Image();\r\n  myImageData.src = canvas.toDataURL();\r\n  ctx.save();\r\n  if (event.ctrlKey) {\r\n    ctx.translate(canvas.width, 1);\r\n    ctx.rotate(Math.PI / 2);\r\n  } else {\r\n    ctx.translate(1, canvas.width);\r\n    ctx.rotate(3 * Math.PI / 2);\r\n  }\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  myImageData.onload = function() {\r\n    ctx.drawImage(myImageData, 0, 0);\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nconst rotationButton = document.querySelector('.rotation');\r\nrotationButton.addEventListener('mousedown', rotation);\r\n\r\n// flipflop\r\nfunction flipflop(event) {\r\n  const myImageData = new Image();\r\n  myImageData.src = canvas.toDataURL();\r\n  ctx.save();\r\n  if(event.ctrlKey) {\r\n    ctx.translate(0, canvas.width);\r\n    ctx.scale(1, -1);\r\n  } else {\r\n    ctx.translate(canvas.width, 0);\r\n    ctx.scale(-1, 1);\r\n  }\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  myImageData.onload = function() {\r\n    ctx.drawImage(myImageData, 0, 0);\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nconst flipflopButton = document.querySelector('.flipflop');\r\nflipflopButton.addEventListener('mousedown', flipflop);\r\n\r\n// dithering - fill color each even pixel as chess board\r\nfunction dithering(event) {\r\n  if (currentTool() !== 'dithering' || !isDrawing) return;\r\n  const prevColor = document.querySelector('.prev-color');\r\n  let square = boxSize();\r\n  const x = Math.floor(event.offsetX / scale());\r\n  const y = Math.floor(event.offsetY / scale());\r\n  if (event.ctrlKey) {\r\n      for(let x1 = x; x1 < x + square; x1++) {\r\n        for(let y1 = y; y1 < y + square; y1++) {\r\n          if(x1 % 2 !== y1 % 2) {\r\n            ctx.fillStyle = currentColor();\r\n            ctx.fillRect(x1, y1, 1, 1);\r\n          } else {\r\n            ctx.fillStyle = prevColor.value;\r\n            ctx.fillRect(x1, y1, 1, 1);\r\n          }\r\n        }\r\n      }\r\n  } else {\r\n      for(let x1 = x; x1 < x + square; x1++) {\r\n        for(let y1 = y; y1 < y + square; y1++) {\r\n          if(x1 % 2 !== y1 % 2) {\r\n            ctx.fillStyle = currentColor();\r\n            ctx.fillRect(x1, y1, 1, 1);\r\n          } else {\r\n            ctx.clearRect(x1, y1, 1, 1);\r\n          }\r\n        }\r\n      }\r\n  }\r\n}\r\n\r\n// helper for function lighten\r\n// https://gist.github.com/mjackson/5311256\r\nfunction rgbToHsl(r, g, b) {\r\n  r /= 255, g /= 255, b /= 255;\r\n  let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n  let h, s, l = (max + min) / 2;\r\n  if (max == min) {\r\n    h = s = 0; // achromatic\r\n  } else {\r\n    let d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    switch (max) {\r\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n      case g: h = (b - r) / d + 2; break;\r\n      case b: h = (r - g) / d + 4; break;\r\n    }\r\n    h /= 6;\r\n  }\r\n  return [ h * 360, s * 100, l * 100 ];\r\n}\r\n\r\n// lighten - set color lighter or darker\r\nfunction lighten(event) {\r\n  if (currentTool() !== 'lighten' || !isDrawing) return;\r\n  let square = boxSize();\r\n\r\n  for(let x2 = x1; x2 < x1 + square; x2++) {\r\n    for(let y2 = y1; y2 < y1 + square; y2++) {\r\n      let pixel = ctx.getImageData(x2, y2, 1, 1);\r\n      let data = pixel.data;\r\n\r\n      // if color transparent\r\n      if (data[3] === 0) return;\r\n      let [h, s, l] = rgbToHsl(data[0], data[1], data[2]);\r\n\r\n      if (event.ctrlKey) {\r\n        ctx.fillStyle = `hsl(${h}, ${s}%, ${l > 6 ? l -=5 : 1}%)`;\r\n\r\n      } else {\r\n        ctx.fillStyle = `hsl(${h}, ${s}%, ${l < 94 ? l +=5 : 99}%)`;\r\n      }\r\n      ctx.fillRect(x2, y2, 1, 1);\r\n    }\r\n  }\r\n}\r\n\r\n// color picker - get color of pixel on canvas\r\nfunction colorPicker() {\r\n  if (currentTool() !== 'color-picker' || !isDrawing) return;\r\n  const activeColor = document.querySelector('.active-color');\r\n  const x1 = Math.floor(event.offsetX / scale());\r\n  const y1 = Math.floor(event.offsetY / scale());\r\n  let pixel = ctx.getImageData(x1, y1, 1, 1);\r\n  let data = pixel.data;\r\n  // if color transparent\r\n  if (data[3] === 0) return;\r\n  let r = data[0].toString(16);\r\n  r = r.length === 1 ? \"0\" + r : r;\r\n  let g = data[1].toString(16);\r\n  g = g.length === 1 ? \"0\" + g : g;\r\n  let b = data[2].toString(16);\r\n  b = b.length === 1 ? \"0\" + b : b;\r\n  let hex = `#${r}${g}${b}`;\r\n  activeColor.value = hex;\r\n}\r\n\r\n// key activation tools\r\nfunction hotKey(event) {\r\n  const tools = document.querySelector('.tools');\r\n  const hotkeyValues = document.querySelectorAll('.hotkey-value');\r\n  const hotkeyNames = document.querySelectorAll('.hotkey-name');\r\n  for(let i = 0; i < hotkeyValues.length; i++) {\r\n    if (event.code === `Key${hotkeyValues[i].innerText}`) {\r\n    tools.querySelector(`input[value=${hotkeyNames[i].innerText}]`).checked = true;\r\n    }\r\n  }\r\n}\r\n\r\n// modal window to change keyboard shortcuts\r\nconst changeHotkeys = document.querySelector('.change-hotkeys');\r\nconst hotkeyOpen = document.querySelector('.change-hotkey');\r\nconst hotkeyClose = document.querySelector('.cancel');\r\n\r\nfunction changeShortcuts(event) {\r\n  if(!event.target.classList.contains('hotkey-input')) return;\r\n\r\n  const inform = document.querySelector('.inform');\r\n  const btnHotkey = document.querySelector('.btn-hotkey');\r\n  const hotkeyValues = document.querySelectorAll('.hotkey-value');\r\n  const hotkeyValuesArr = [];\r\n  hotkeyValues.forEach(hotkey => hotkeyValuesArr.push(hotkey.innerText));\r\n\r\n  event.target.addEventListener('input', () => {\r\n    let changeValue = event.target.value;\r\n    if (!changeValue.match(/[a-zA-Z]/)) {\r\n      inform.innerText = \"Please use only Latin letters\";\r\n    }\r\n    if (changeValue.match(/[a-z]/)) {\r\n      changeValue = changeValue.toUpperCase();\r\n    }\r\n    if (hotkeyValuesArr.includes(changeValue)) {\r\n      inform.innerText = \"This letter already in use. Please choose another letter\";\r\n    } else if(changeValue.match(/[A-Z]/)) {\r\n      inform.innerText = \"Press the button to change the hotkey\";\r\n    }\r\n    btnHotkey.addEventListener('click', () => {\r\n      event.target.previousElementSibling.innerText = changeValue;\r\n      event.target.value = '';\r\n      inform.innerText = \"The hotkey is changed successfully\";\r\n\r\n      const tooltipShortcuts = document.querySelectorAll('.tooltip-shortcut');\r\n      tooltipShortcuts.forEach(tooltip => {\r\n        if(tooltip.dataset.tool === event.target.previousElementSibling.previousElementSibling.innerText) {\r\n          tooltip.innerText = `(${changeValue})`;\r\n        }\r\n      })\r\n    });\r\n  });\r\n}\r\n\r\nchangeHotkeys.addEventListener('click', changeShortcuts);\r\nhotkeyOpen.addEventListener('click', () => {\r\n  changeHotkeys.classList.remove('hide');\r\n});\r\nhotkeyClose.addEventListener('click', () => {\r\n  changeHotkeys.classList.add('hide');\r\n});\r\n\r\nwindow.addEventListener('keydown', hotKey);\r\n\r\n// show and hide modal window with settings on layout\r\nfunction showSettings(event) {\r\n  const settings = document.querySelectorAll('.setting-container');\r\n  const buttons = document.querySelectorAll('.setting-btn');\r\n  const parent = event.target.parentNode;\r\n\r\n  if (!event.target.classList.contains('btn-show')) {\r\n    buttons.forEach(button => {\r\n      button.classList.remove('btn-show');\r\n    });\r\n    event.target.classList.add('btn-show')\r\n  }\r\n\r\n  if(parent.classList.contains('setting-hide')) {\r\n    settings.forEach(setting => {\r\n      setting.classList.remove('setting-hide');\r\n    });\r\n    if (!parent.classList.contains('setting-show')) {\r\n      settings.forEach(setting => {\r\n        setting.classList.remove('setting-show');\r\n        setting.lastElementChild.classList.remove('setting-opacity');\r\n        setting.lastElementChild.classList.add('setting-none');\r\n        parent.classList.add('setting-show');\r\n        parent.lastElementChild.classList.remove('setting-none');\r\n        parent.lastElementChild.classList.add('setting-opacity');\r\n      });\r\n    }\r\n  } else if (!parent.classList.contains('setting-show')) {\r\n    settings.forEach(setting => {\r\n      setting.classList.remove('setting-show');\r\n      setting.lastElementChild.classList.remove('setting-opacity');\r\n      setting.lastElementChild.classList.add('setting-none');\r\n      parent.classList.add('setting-show');\r\n      parent.lastElementChild.classList.remove('setting-none');\r\n      parent.lastElementChild.classList.add('setting-opacity');\r\n    });\r\n  } else {\r\n    settings.forEach(setting => {\r\n      setting.classList.add('setting-hide');\r\n    });\r\n  }\r\n}\r\n\r\nconst settingResizeBtn = document.querySelector('.setting-resize-btn');\r\nconst settingSaveBtn = document.querySelector('.setting-save-btn');\r\nconst settingImportBtn = document.querySelector('.setting-import-btn');\r\n\r\nsettingResizeBtn.addEventListener('click', showSettings);\r\nsettingSaveBtn.addEventListener('click', showSettings);\r\nsettingImportBtn.addEventListener('click', showSettings);\r\n\r\n// canvas zoom in and zoom out on mousewheel\r\nfunction mouseWheelHandler(e) {\r\n  e = window.event;\r\n  let delta = Math.max(-1, Math.min(1, e.wheelDelta));\r\n  canvas.style.width = Math.max(32, Math.min(640, canvas.offsetWidth + (32 * delta))) + \"px\";\r\n  canvas.style.height = Math.max(32, Math.min(640, canvas.offsetHeight + (32 * delta))) + \"px\";\r\n  return false;\r\n}\r\n\r\ncanvas.addEventListener('mousewheel', mouseWheelHandler);\r\n\r\ncanvas.addEventListener('mousemove', pen);\r\ncanvas.addEventListener('mousemove', mirror);\r\ncanvas.addEventListener('mousedown', bucket);\r\ncanvas.addEventListener('mousedown', eraser);\r\ncanvas.addEventListener('mousemove', eraser);\r\ncanvas.addEventListener('mousedown', brush);\r\ncanvas.addEventListener('mousemove', stroke);\r\ncanvas.addEventListener('mousemove', circle);\r\ncanvas.addEventListener('mousemove', rectangle);\r\ncanvas.addEventListener('mousemove', move);\r\ncanvas.addEventListener('mousemove', shape);\r\ncanvas.addEventListener('mousedown', shape);\r\ncanvas.addEventListener('mousedown', colorPicker);\r\ncanvas.addEventListener('mousedown', lighten);\r\ncanvas.addEventListener('mousemove', dithering);\r\n\r\n// add numbers to frames\r\nfunction frameNumber() {\r\n  const frames = document.querySelectorAll('.preview');\r\n  frames.forEach((frame, index) => {\r\n    const frameNumber = frame.querySelector('.number');\r\n    frameNumber.innerText = index + 1;\r\n  });\r\n}\r\n\r\n// add style to active frame\r\nfunction frameStyle() {\r\n  const frames = document.querySelectorAll('.preview');\r\n  frames.forEach((frame, index) => {\r\n    frame.classList.remove('preview-active');\r\n    if (index === frames.length - 1) {\r\n      frame.classList.add('preview-active');\r\n    }\r\n  });\r\n}\r\n\r\n// add canvas image to active frame when mouse up\r\nfunction frameCreate() {\r\n  const frames = document.querySelectorAll('.preview');\r\n  frames.forEach((frame) => {\r\n    if (frame.classList.contains('preview-active')) {\r\n      const canvas2 = frame.querySelector('.canvas2');\r\n      const ctx2 = canvas2.getContext('2d');\r\n      ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\r\n      ctx2.drawImage(canvas, 0, 0);\r\n    }\r\n  });\r\n}\r\n\r\ncanvas.addEventListener('mouseup', frameCreate);\r\n\r\n// style active frame on click\r\nfunction frameActivation(event) {\r\n  if (event.target.classList.contains('canvas2')) {\r\n    const frames = document.querySelectorAll('.preview');\r\n    frames.forEach((frame) => {\r\n      if (frame.classList.contains('preview-active')) {\r\n        frame.classList.remove('preview-active');\r\n      }\r\n    });\r\n    event.target.parentNode.classList.add('preview-active');\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.drawImage(event.target, 0, 0);\r\n  }\r\n}\r\n\r\nconst parent = document.querySelector('.previews-list');\r\nparent.addEventListener(\"click\", frameActivation);\r\n\r\n// create new frame when click button Add frames\r\nfunction addFrame() {\r\n  const elem = parent.querySelector('.preview-container');\r\n  const clone = elem.cloneNode(true);\r\n  parent.appendChild(clone);\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  frameNumber();\r\n  frameStyle();\r\n}\r\n\r\nconst addFrameButton = document.querySelector('.add-frame');\r\naddFrameButton.addEventListener(\"click\", addFrame);\r\n\r\n// delete frame when click button delete\r\nfunction deleteFrame(event) {\r\n  if (event.target.classList.contains('delete') && parent.children.length > 1) {\r\n    if(event.target.parentNode.classList.contains('preview-active')) {\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n    event.target.parentNode.parentNode.remove();\r\n    frameNumber();\r\n    animationBackground();\r\n    frameStyle();\r\n  }\r\n}\r\n\r\nparent.addEventListener(\"click\", deleteFrame);\r\n\r\n// move frame and swape with other frames\r\nfunction moveFrame(event) {\r\n  if (!event.target.classList.contains('move')) return;\r\n  let t = event.target.parentNode;\r\n  event.target.onmousedown = function () {\r\n    t.style.position = \"absolute\";\r\n    t.style.zIndex = 100;\r\n    t.parentNode.classList.add('preview-container-active');\r\n\r\n    function moveAt(event) {\r\n      t.style.top = event.pageY - t.offsetHeight / 2 - t.parentNode.offsetTop + 'px';\r\n      t.style.left = '-3px'\r\n    }\r\n    document.onmousemove = function (event) {\r\n      moveAt(event);\r\n    }\r\n  }\r\n  t.onmouseup = function () {\r\n    const blockContainer = document.querySelectorAll('.preview-container');\r\n    blockContainer.forEach(item => {\r\n      let y = t.offsetTop + t.parentNode.offsetTop;\r\n      let y1 = item.offsetTop;\r\n      if (y > y1 - 45 && y < y1 + 45) {\r\n        let parent1 = item;\r\n        let child1 = item.firstElementChild;\r\n        let parent0 = t.parentNode;\r\n        let child0 = t;\r\n        t.style.top = '0px';\r\n        t.style.left = '0px'\r\n\r\n        parent1.appendChild(child0);\r\n        parent0.appendChild(child1);\r\n\r\n        parent0.classList.remove('preview-container-active');\r\n      } else {\r\n        t.parentNode.appendChild(t);\r\n        t.parentNode.classList.remove('preview-container-active');\r\n      }\r\n    });\r\n    t.style.zIndex = 1;\r\n\r\n    document.onmousemove = null;\r\n    t.onmouseup = null;\r\n\r\n    frameNumber();\r\n    animationBackground();\r\n    frameStyle();\r\n  }\r\n}\r\n\r\nparent.addEventListener(\"mouseover\", moveFrame);\r\n\r\n// clone frame when click button clone\r\nfunction cloneFrame(event) {\r\n  if (event.target.classList.contains('copy')) {\r\n    const clone = event.target.parentNode.parentNode.cloneNode(true);\r\n    const parentNode = event.target.parentNode.parentNode;\r\n    const canvasParentNode = event.target.parentNode.querySelector('canvas');\r\n    const canvasCloneElem = clone.querySelector('canvas');\r\n    const ctxCloneElem = canvasCloneElem.getContext('2d');\r\n    ctxCloneElem.drawImage(canvasParentNode, 0, 0);\r\n    parent.insertBefore(clone, parentNode);\r\n    frameNumber();\r\n    animationBackground();\r\n    frameStyle();\r\n  }\r\n}\r\nparent.addEventListener(\"click\", cloneFrame);\r\n\r\nconst layer = document.querySelector('.layer');\r\n\r\n// layer management\r\nconst layerManagementContainer = document.querySelector('.layer-management-layer-container');\r\n\r\n// create new layers when click add layer\r\nfunction createLayer() {\r\n  const addLayer = document.createElement('div');\r\n  addLayer.classList.add('layer-management-layer');\r\n  addLayer.innerText = 'Layer ';\r\n  addLayer.dataset.layernum = layerManagementContainer.children.length + 1;\r\n  const span = document.createElement('span');\r\n  span.innerText = `${layerManagementContainer.children.length\r\n + 1}`;\r\n  addLayer.appendChild(span);\r\n\r\n  layerManagementContainer.insertBefore(addLayer, layerManagementContainer.firstChild);\r\n}\r\n\r\n// active layer style for layer which create last\r\nfunction styleActiveLayer() {\r\n  const layerManagementLayers = document.querySelectorAll('.layer-management-layer');\r\n  layerManagementLayers.forEach(layer => {\r\n    if (layer.classList.contains('layer-management-layer-active')) {\r\n      layer.classList.remove('layer-management-layer-active');\r\n    }\r\n  });\r\n  layerManagementContainer.firstElementChild.classList.add('layer-management-layer-active');\r\n}\r\n\r\n// active layer style for clicking layer\r\nfunction styleActiveClickedLayer(event) {\r\n  const layerManagementLayers = document.querySelectorAll('.layer-management-layer');\r\n  layerManagementLayers.forEach(layer => {\r\n    if (layer.classList.contains('layer-management-layer-active')) {\r\n      layer.classList.remove('layer-management-layer-active');\r\n    }\r\n    event.target.classList.add('layer-management-layer-active');\r\n  })\r\n}\r\n\r\nlayerManagementContainer.addEventListener('click', styleActiveClickedLayer);\r\n\r\n// create additional canvas for semitransparent image\r\nfunction createCanvasTemp() {\r\n  const canvasTemp = document.createElement('canvas');\r\n  canvasTemp.width = canvasTemp.height = canvas.width;\r\n  canvasTemp.classList.add('canvas-temp');\r\n  canvasTemp.dataset.canvastempnum = layerManagementContainer.children.length - 1;\r\n  const mainContainer = document.querySelector('.main-container');\r\n  mainContainer.appendChild(canvasTemp);\r\n\r\n  const ctxTemp = canvasTemp.getContext('2d');\r\n  const myImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n  ctxTemp.putImageData(myImageData, 0, 0);\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  const url = canvas.toDataURL();\r\n  localStorage.setItem('url', url);\r\n}\r\n\r\nfunction layerPlus() {\r\n  createLayer();\r\n  styleActiveLayer();\r\n  createCanvasTemp();\r\n}\r\n\r\n// active layer drav image on canvas for clicking layer\r\nfunction drawImageActiveClickingLayer() {\r\n  const layerActive = document.querySelector('.layer-management-layer-active');\r\n  const layerActiveNum = layerActive.dataset.layernum;\r\n  const canvasTempAll = document.querySelectorAll('.canvas-temp');\r\n  isCanvasTemp = false;\r\n  canvasTempAll.forEach(canvasTemp => {\r\n    if(canvasTemp.dataset.canvastempnum == layerManagementContainer.children.length) {\r\n      isCanvasTemp = true;\r\n    }\r\n  });\r\n  if(!isCanvasTemp) {\r\n    const canvasTemp = document.createElement('canvas');\r\n    canvasTemp.width = canvasTemp.height = canvas.width;\r\n    canvasTemp.classList.add('canvas-temp');\r\n    canvasTemp.dataset.canvastempnum = layerManagementContainer.children.length;\r\n    const mainContainer = document.querySelector('.main-container');\r\n    mainContainer.appendChild(canvasTemp);\r\n\r\n    const ctxTemp = canvasTemp.getContext('2d');\r\n    const myImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    ctxTemp.putImageData(myImageData, 0, 0);\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    const url = canvas.toDataURL();\r\n    localStorage.setItem('url', url);\r\n  }\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  canvasTempAll.forEach(canvasTemp => {\r\n    if(canvasTemp.dataset.canvastempnum == layerActiveNum) {\r\n      ctx.drawImage(canvasTemp, 0, 0);\r\n    }\r\n  });\r\n}\r\n\r\nlayerManagementContainer.addEventListener('click', drawImageActiveClickingLayer);\r\n\r\n// canvas drav image on active layer\r\nfunction drawImageOnCanvasTemp() {\r\n  const layerActive = document.querySelector('.layer-management-layer-active');\r\n  const layerActiveNum = layerActive.dataset.layernum;\r\n  const layersLength = layerManagementContainer.children.length;\r\n  const canvasTempAll = document.querySelectorAll('.canvas-temp');\r\n  if(layerActiveNum == layersLength) return;\r\n  canvasTempAll.forEach(canvasTemp => {\r\n    if(canvasTemp.dataset.canvastempnum == layerActiveNum) {\r\n      const ctxTemp = canvasTemp.getContext('2d');\r\n      const myImageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      ctxTemp.putImageData(myImageData, 0, 0);\r\n    }\r\n  });\r\n}\r\n\r\ncanvas.addEventListener('mouseup', drawImageOnCanvasTemp);\r\n\r\nfunction removeCanvasTemp() {\r\n  drawImageActiveClickingLayer();\r\n  const layerActive = document.querySelector('.layer-management-layer-active');\r\n  const layersLength = layerManagementContainer.children.length;\r\n  const layerActiveNum = layerActive.dataset.layernum;\r\n  const canvasTempAll = document.querySelectorAll('.canvas-temp');\r\n  if(layersLength === 1) {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    const url = canvas.toDataURL();\r\n    localStorage.setItem('url', url);\r\n    layerActive.firstElementChild.innerText = '1';\r\n    layerActive.dataset.layernum = '1';\r\n    canvasTempAll.forEach(canvas2 => canvas2.remove());\r\n    frameCreate();\r\n    animationBackground();\r\n    return;\r\n  }\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  layerActive.remove();\r\n    canvasTempAll.forEach(canvas2 => {\r\n      if(canvas2.dataset.canvastempnum == layerActiveNum) {\r\n        canvas2.remove();\r\n      }\r\n    });\r\n  styleActiveLayer();\r\n}\r\n\r\nfunction canvasTempToFrame() {\r\n  const activeFrame = document.querySelector('.preview-active');\r\n  const currentFrame = activeFrame.parentNode.previousElementSibling;\r\n  const canvas2 = currentFrame.querySelector('.canvas2');\r\n  const ctxFrame = canvas2.getContext('2d');\r\n  const canvasTemp = document.querySelectorAll('.canvas-temp');\r\n  for(let i = 0; i < canvasTemp.length; i++) {\r\n    ctxFrame.drawImage(canvasTemp[i], 0, 0);\r\n    canvasTemp[i].remove();\r\n  }\r\n  const url = canvas2 .toDataURL();\r\n  localStorage.setItem('url', url);\r\n  while (layerManagementContainer.children.length > 1) {\r\n    layerManagementContainer.removeChild(layerManagementContainer.firstChild);\r\n  }\r\n  layerManagementContainer.firstElementChild.firstElementChild.innerText = '1';\r\n  styleActiveLayer();\r\n}\r\n\r\naddFrameButton.addEventListener(\"click\", () => {\r\n  canvasTempToFrame();\r\n  removeCanvasTemp();\r\n  styleActiveLayer();\r\n});\r\n\r\n// up layer when click btn-up\r\nfunction layerUp() {\r\n  const layerActive = document.querySelector('.layer-management-layer-active');\r\n  const layersLength = layerManagementContainer.children.length;\r\n  const layerActiveNum = layerActive.dataset.layernum;\r\n  const mainContainer = document.querySelector('.main-container');\r\n  const canvasTempAll = document.querySelectorAll('.canvas-temp');\r\n  if(layerActive === layerManagementContainer.firstElementChild) return;\r\n\r\n  const prevLayer = layerActive.previousElementSibling;\r\n  layerManagementContainer.removeChild(layerActive);\r\n  layerManagementContainer.insertBefore(layerActive, prevLayer);\r\n\r\n  canvasTempAll.forEach(canvasTemp => {\r\n    if(canvasTemp.dataset.canvastempnum == layerActiveNum) {\r\n      const prevCanvasTemp = canvasTemp.previousElementSibling;\r\n      mainContainer.removeChild(canvasTemp);\r\n      mainContainer.insertBefore(canvasTemp, prevCanvasTemp);\r\n    }\r\n  });\r\n}\r\n\r\n// down layer when click btn-down\r\nfunction layerDown() {\r\n  const layerActive = document.querySelector('.layer-management-layer-active');\r\n  const layersLength = layerManagementContainer.children.length;\r\n  const layerActiveNum = layerActive.dataset.layernum;\r\n  const mainContainer = document.querySelector('.main-container');\r\n  const canvasTempAll = document.querySelectorAll('.canvas-temp');\r\n  if(layerActive === layerManagementContainer.lastElementChild) return;\r\n\r\n  const nextLayer = layerActive.nextElementSibling;\r\n  layerManagementContainer.removeChild(nextLayer);\r\n  layerManagementContainer.insertBefore(nextLayer, layerActive);\r\n\r\n  canvasTempAll.forEach(canvasTemp => {\r\n    if(canvasTemp.dataset.canvastempnum == layerActiveNum) {\r\n      const nextCanvasTemp = canvasTemp.nextElementSibling;\r\n      mainContainer.removeChild(nextCanvasTemp);\r\n      mainContainer.insertBefore(nextCanvasTemp, canvasTemp);\r\n    }\r\n  });\r\n}\r\n\r\nfunction layerManagementBtnDelegation(event) {\r\n  event.stopPropagation();\r\n  if (!event.target.classList.contains('layer-management-btn')) return;\r\n  if (event.target.classList.contains('btn-plus')) {\r\n    layerPlus();\r\n  } else if (event.target.classList.contains('btn-delete')) {\r\n    removeCanvasTemp();\r\n  } else if (event.target.classList.contains('btn-up')) {\r\n    layerUp()\r\n  } else if (event.target.classList.contains('btn-down')) {\r\n    layerDown();\r\n  }\r\n}\r\n\r\nconst layerManagementBtn = document.querySelector('.layer-management-btn-container');\r\nlayerManagementBtn.addEventListener('click', layerManagementBtnDelegation);\r\n\r\n// change text on input range\r\nfunction valueFPS() {\r\n  const fpsValue = document.querySelector('.fps-value');\r\n  fpsValue.innerText = rangeFPS.value;\r\n}\r\n\r\nconst rangeFPS = document.querySelector('.range-fps');\r\nrangeFPS.addEventListener(\"input\", valueFPS);\r\n\r\n// run the animation in Full screen mode\r\nfunction toggleFullscreen() {\r\n  const layerWrapper = document.querySelector('.layer-wrapper');\r\n  if (!document.fullscreenElement) {\r\n    layerWrapper.requestFullscreen();\r\n  } else {\r\n    document.exitFullscreen();\r\n  }\r\n}\r\n\r\nconst layerBtn = document.querySelector('.layer-btn');\r\nlayerBtn.addEventListener('click', toggleFullscreen);\r\n\r\n// animation layer background image\r\nlet indexImage = 0;\r\nlet timer;\r\n\r\n// define speed of animation layer background image\r\nfunction animationSpeed() {\r\n  let speed = 1000 / rangeFPS.value;\r\n  return speed;\r\n}\r\n\r\nfunction animationBackground() {\r\n  let speed = animationSpeed();\r\n  const framesCanvas = document.querySelectorAll('.canvas2');\r\n  const ctxLayer = layer.getContext('2d');\r\n  ctxLayer.clearRect(0, 0, layer.width, layer.height);\r\n  ctxLayer.drawImage(framesCanvas[indexImage = ++indexImage % framesCanvas.length], 0, 0);\r\n  const canvasTemp = document.querySelectorAll('.canvas-temp');\r\n  for(let i = 0; i < canvasTemp.length; i++) {\r\n    ctxLayer.drawImage(canvasTemp[i], 0, 0);\r\n  }\r\n  if (timer) {\r\n    clearInterval(timer);\r\n  }\r\n  timer = setTimeout(animationBackground, speed);\r\n}\r\n\r\ncanvas.addEventListener('mouseup', animationBackground);\r\nrangeFPS.addEventListener(\"input\", animationBackground);\r\n\r\n// save image\r\n// change text on input range\r\nconst rangeSize = document.querySelector('.range-size');\r\n\r\nfunction valueImageSize() {\r\n  const sizeValue = document.querySelector('.size-value');\r\n  sizeValue.innerText = rangeSize.value;\r\n  return rangeSize.value;\r\n}\r\n\r\nrangeSize.addEventListener(\"input\", valueImageSize);\r\n\r\n// save image as gif\r\n// https://github.com/yahoo/gifshot\r\n// https://github.com/rndme/download\r\nfunction framesToImages() {\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n  const images = [];\r\n  canvas2All.forEach(canvas2 => {\r\n    const canvasIn = document.createElement('canvas');\r\n    const ctxIn = canvasIn.getContext('2d');\r\n\r\n    const size = valueImageSize();\r\n    canvasIn.width = size;\r\n    canvasIn.height = size;\r\n    ctxIn.fillStyle = 'rgba(225,225,225,0.1)';\r\n    ctxIn.fillRect(0, 0, canvasIn.width, canvasIn.height);\r\n    ctxIn.imageSmoothingEnabled = false;\r\n    ctxIn.drawImage(canvas2, 0, 0, size, size);\r\n    images.push(canvasIn.toDataURL());\r\n  });\r\n  return images;\r\n}\r\n\r\nconst saveGif = document.querySelector('.save-gif');\r\nsaveGif.addEventListener('click', () => {\r\n  gifshot.createGIF({\r\n    images: framesToImages(),\r\n    interval: 1 / rangeFPS.value,\r\n    gifWidth: valueImageSize(),\r\n    gifHeight: valueImageSize(),\r\n  }, (obj) => {\r\n    if (!obj.error) {\r\n      const image = obj.image;\r\n      download(image, 'newGif.gif', 'gif');\r\n    }\r\n  });\r\n});\r\n\r\n// save image as apng\r\n// https://github.com/photopea/UPNG.js\r\nfunction ArrayBufferData() {\r\n  const data = [];\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n\r\n  canvas2All.forEach(canvas2 => {\r\n    const ctx = canvas2.getContext('2d');\r\n    const canvasIn = document.createElement('canvas');\r\n    const ctxIn = canvasIn.getContext('2d');\r\n\r\n    const size = valueImageSize();\r\n    canvasIn.width = size;\r\n    canvasIn.height = size;\r\n\r\n    ctxIn.imageSmoothingEnabled = false;\r\n    ctxIn.drawImage(canvas2, 0, 0, size, size);\r\n    const partData = ctxIn.getImageData(0, 0, size, size).data.buffer;\r\n    data.push(partData);\r\n  });\r\n  return data;\r\n}\r\n\r\nfunction saveImageAsApng() {\r\n  const arrAnimationSpeed = new Array(ArrayBufferData().length);\r\n  arrAnimationSpeed.fill(animationSpeed());\r\n  const imageData = UPNG.encode(ArrayBufferData(), valueImageSize(), valueImageSize(), 0, arrAnimationSpeed);\r\n  download(imageData, 'newAPNG.apng', 'apng');\r\n}\r\n\r\nconst saveApng = document.querySelector('.save-apng');\r\nsaveApng.addEventListener('click', saveImageAsApng);\r\n\r\n// save image as own format pixel\r\nfunction saveImageAsPixel() {\r\n  const fps = rangeFPS.value;\r\n  const size = canvas.width;\r\n  const frameCount = framesToImages().length;\r\n  const canvasUrl = canvas.toDataURL();\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n  let images = \"\";\r\n  for(let i = 0; i < frameCount; i++) {\r\n      const framesUrl = canvas2All[i].toDataURL();\r\n      images += `${framesUrl}, `;\r\n    }\r\n  const pixel = `${fps}, ${size}, ${frameCount}, ${canvasUrl}, ${images}`;\r\n  download(pixel, 'newPixel.pixel', 'pixel');\r\n}\r\nconst savePiskel = document.querySelector('.save-piskel');\r\nsavePiskel.addEventListener('click', saveImageAsPixel);\r\n\r\n// open local file pixel from computer\r\n// http://qaru.site/questions/57624/how-to-open-a-local-disk-file-with-javascript\r\nfunction readSingleFile(event) {\r\n  const file = event.target.files[0];\r\n  if (!file) return;\r\n  const reader = new FileReader();\r\n  reader.onload = function(event) {\r\n    const contents = event.target.result;\r\n    importPixel(contents);\r\n  };\r\n  reader.readAsText(file);\r\n}\r\n\r\nconst importPixelBtn = document.querySelector('.import-pixel');\r\nimportPixelBtn.addEventListener('change', readSingleFile, false);\r\n\r\n// restore the state of elements from a pixel file\r\nfunction importPixel(contents) {\r\n  const pixelArr = contents.split(', ');\r\n  const saveFps = pixelArr[0];\r\n  const saveSize = pixelArr[1];\r\n  const saveFrameCount = pixelArr[2];\r\n  const saveCanvasUrl = pixelArr[3];\r\n\r\n  rangeFPS.value = saveFps;\r\n  const fpsValue = document.querySelector('.fps-value');\r\n  fpsValue.innerText = saveFps;\r\n\r\n  canvas.width = canvas.height = saveSize;\r\n  canvas2.width = canvas2.height = saveSize;\r\n  layer.width = layer.height = saveSize;\r\n  const resizeInput = document.getElementsByName('resize');\r\n  resizeInput.forEach(input => {\r\n    input.checked = false;\r\n    if(input.value == saveSize) {\r\n      input.checked = true;\r\n      console.log('saveSize')\r\n    }\r\n  });\r\n\r\n  const saveCanvasImage = new Image();\r\n  saveCanvasImage.src = saveCanvasUrl;\r\n  saveCanvasImage.onload = function() {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.drawImage(saveCanvasImage, 0, 0, canvas.width, canvas.height);\r\n    console.log(saveCanvasImage);\r\n    frameCreate();\r\n    animationBackground();\r\n  }\r\n\r\n  if(saveFrameCount > 1) {\r\n    const framesParent = document.querySelector('.previews-list');\r\n\r\n    for(let i = 0; i < saveFrameCount-1; i++) {\r\n      const canvas2 = framesParent.lastElementChild.firstElementChild.firstElementChild;\r\n      const ctx2 = canvas2.getContext('2d');\r\n      const framesImage = new Image();\r\n      framesImage.src = pixelArr[4 + i];\r\n      framesImage.onload = function() {\r\n        ctx2.drawImage(framesImage, 0, 0);\r\n      }\r\n      addFrame();\r\n    }\r\n  }\r\n}\r\n\r\n// import image from computer\r\nfunction importImage(event) {\r\n  const image = event.target.files[0];\r\n  if (!image) return;\r\n  const readerImage = new FileReader();\r\n  readerImage.onload = function(event) {\r\n    const loadImageUrl = event.target.result;\r\n    var loadImage = new Image();\r\n    loadImage.src = loadImageUrl;\r\n    loadImage.onload = function() {\r\n      ctx.imageSmoothingEnabled = false;\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\t  ctx.drawImage(loadImage, 0, 0, canvas.width, canvas.height);\r\n      frameCreate();\r\n      animationBackground();\r\n    };\r\n  };\r\n  readerImage.readAsDataURL(image);\r\n}\r\n\r\nconst importImageBtn = document.querySelector('.import-image');\r\nimportImageBtn.addEventListener('change', importImage, false);\r\n\r\n// save image as png\r\nfunction saveImageAsPng() {\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n  const canvasIn = document.createElement('canvas');\r\n    const ctxIn = canvasIn.getContext('2d');\r\n\r\n    const size = valueImageSize();\r\n    canvasIn.width = size;\r\n    canvasIn.height = size;\r\n\r\n    ctxIn.imageSmoothingEnabled = false;\r\n\r\n  canvas2All.forEach(canvas2 => {\r\n    ctxIn.drawImage(canvas2, 0, 0, size, size);\r\n  });\r\n  const image = canvasIn.toDataURL();\r\n  download(image, 'newPng.png', 'png');\r\n}\r\n\r\nconst savePng = document.querySelector('.save-png');\r\nsavePng.addEventListener('click', saveImageAsPng);\r\n\r\n// upload image to Google Drive\r\nconst saveToGoogleDrive = (fileContent) => {\r\n  const arrAnimationSpeed = new Array(ArrayBufferData().length);\r\n  arrAnimationSpeed.fill(animationSpeed());\r\n  const imageData = UPNG.encode(ArrayBufferData(), canvas.width, canvas.height, 0, arrAnimationSpeed);\r\n\r\n  var file = new Blob([imageData], { type: 'image/apng' });\r\n  var metadata = {\r\n    'name': 'newPiskel.apng',\r\n    'mimeType': 'apng',\r\n  };\r\n  var accessToken = window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token;\r\n  var form = new FormData();\r\n  form.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));\r\n  form.append('file', file);\r\n  fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id', {\r\n    name: 'piskel.jpg',\r\n    method: 'POST',\r\n    headers: new Headers({ 'Authorization': 'Bearer ' + accessToken }),\r\n    body: form,\r\n  });\r\n}\r\n\r\nconst btnSaveGoogle = document.querySelector('.save-google-drive');\r\nbtnSaveGoogle.addEventListener('click', saveToGoogleDrive);\r\n\r\n// save the state of elements in LocalStorage\r\nconst tool = document.getElementsByName('tool');\r\nfor (let i = 0; i < tool.length; i++) {\r\n  tool[i].onclick = function() {\r\n    localStorage.setItem('radioTool', this.value);\r\n  }\r\n}\r\n\r\nconst resize = document.getElementsByName('resize');\r\nfor (let i = 0; i < resize.length; i++) {\r\n  resize[i].onclick = function() {\r\n    localStorage.setItem('radioResize', this.value);\r\n  }\r\n}\r\n\r\nconst activeColor = document.querySelector('.active-color');\r\nconst prevColor = document.querySelector('.prev-color');\r\nactiveColor.onchange = function() {\r\n    localStorage.setItem('activeColor', activeColor.value);\r\n  }\r\nprevColor.onchange = function() {\r\n    localStorage.setItem('prevColor', prevColor.value);\r\n  }\r\n\r\ncanvas.onclick = function() {\r\n  const url = canvas.toDataURL();\r\n  localStorage.setItem('url', url);\r\n}\r\n\r\nfunction saveFrames() {\r\n  const canvas2All = document.querySelectorAll('.canvas2');\r\n  const framesLength = canvas2All.length;\r\n  localStorage.setItem('framesLength', framesLength);\r\n\r\n  for(let i = 0; i < framesLength; i++) {\r\n      const framesUrl = canvas2All[i].toDataURL();\r\n      localStorage.setItem(i, framesUrl);\r\n    }\r\n}\r\n\r\naddFrameButton.addEventListener(\"click\", saveFrames);\r\nparent.addEventListener(\"click\", saveFrames);\r\n\r\n// restore the state of elements after a reboot\r\nwindow.onload = function() {\r\n  if(localStorage.getItem('radioTool')) {\r\n    const radioTool = localStorage.getItem('radioTool');\r\n    document.querySelector('input[name=\"tool\"][value=\"' + radioTool + '\"]').setAttribute('checked','checked');\r\n  }\r\n\r\n  if(localStorage.getItem('radioResize')) {\r\n    const radioResize = localStorage.getItem('radioResize');\r\n    document.querySelector('input[name=\"resize\"][value=\"' + radioResize + '\"]').setAttribute('checked','checked');\r\n    setSizeCanvas();\r\n  }\r\n\r\n  if(localStorage.getItem('activeColor')) {\r\n    activeColor.value = localStorage.getItem('activeColor');\r\n  }\r\n  if(localStorage.getItem('prevColor')) {\r\n    prevColor.value = localStorage.getItem('prevColor');\r\n  }\r\n\r\n  if(localStorage.getItem('url')) {\r\n    const savedImage = new Image();\r\n    savedImage.src = localStorage.getItem('url');\r\n    savedImage.onload = function() {\r\n      ctx.drawImage(savedImage, 0, 0);\r\n      frameCreate();\r\n      animationBackground();\r\n    }\r\n  }\r\n\r\n    if(localStorage.getItem('framesLength')) {\r\n    const framesLength = localStorage.getItem('framesLength');\r\n    const framesParent = document.querySelector('.previews-list');\r\n\r\n    for(let i = 0; i < framesLength-1; i++) {\r\n      const canvas2 = framesParent.lastElementChild.firstElementChild.firstElementChild;\r\n      const ctx2 = canvas2.getContext('2d');\r\n      const framesImage = new Image();\r\n      framesImage.src = localStorage.getItem(i);\r\n      framesImage.onload = function() {\r\n        ctx2.drawImage(framesImage, 0, 0);\r\n      }\r\n      addFrame();\r\n    }\r\n  }\r\n}\r\n\r\n// clear localStorage\r\nconst btnCreate = document.querySelector('.btn-create');\r\nbtnCreate.onclick = function() {\r\n    localStorage.clear();\r\n  }\r\n\r\n"],"sourceRoot":""}